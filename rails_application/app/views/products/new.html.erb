<% content_for(:header) do %>
  New Product
<% end %>

<% content_for(:actions) do %>
  <%= secondary_action_button do %>
    <%= link_to 'Back', products_path %>
  <% end %>

  <%= primary_form_action_button(data: { turbo_frame: "create_product" }) do %>
    Create Product
  <% end %>
<% end %>

<%= turbo_frame_tag "create_product" do %>
  <%= form_with model: @product, id: "form" do |form| %>
    <div>
      <label for="name" class="block font-bold">
        Name
      </label>
      <%= form.text_field :name, required: true, class: "mt-1 focus:ring-blue-500 focus:border-blue-500 block shadow-sm sm:text-sm border-gray-300 rounded-md", data: { turbo_permanent: true } %>
    </div>
    <div class="mt-2">
      <label for="price" class="block font-bold">
        Price
      </label>
      <%= form.number_field :price, min: 0, step: 0.01, required: true, class: "mt-1 focus:ring-blue-500 focus:border-blue-500 block shadow-sm sm:text-sm border-gray-300 rounded-md", data: { turbo_permanent: true } %>
    </div>
    <div class="mt-2">
      <label for="vat_rate" class="block font-bold">
        VAT rate
      </label>
      <%= form.collection_select :vat_rate, Configuration.available_vat_rates, :code, :code, {}, class: "mt-1 focus:ring-blue-500 focus:border-blue-500 block shadow-sm sm:text-sm border-gray-300 rounded-md", data: { turbo_permanent: true } %>
    </div>

    <% if defined?(errors) %>
      <% errors.each do |error| %>
        <div class="mt-2 text-red-600">
          <span><%= error.full_message %></span>
        </div>
      <% end %>
    <% end %>
  <% end %>
<% end %>